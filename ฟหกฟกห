-- ==========================
-- ‡πÇ‡∏´‡∏•‡∏î OrionLib
-- ==========================
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/Chxtoqfee12/script-admin-chx/refs/heads/SRC/ChxOn.lib'))()

-- ==========================
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Window
-- ==========================
local Window = OrionLib:MakeWindow({
    Name = "CHX Plant vs Brainrot V1.1",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "CHXPlantBrainrot"
})

-- ==========================
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Tabs ‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÜ
-- ==========================
local FarmTab = Window:MakeTab({
    Name = "üöú ‡∏ü‡∏≤‡∏£‡πå‡∏°",
    Icon = "rbxassetid://6031075936"
})
-- ==========================
-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£
-- ==========================
local player = game.Players.LocalPlayer
local homeSaved = false
local homePosition = nil
local autoAttackEnabled = false

-- ==========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡πâ‡∏≤‡∏ô
-- ==========================
local function saveHomePosition()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        homePosition = player.Character.HumanoidRootPart.Position
        homeSaved = true
        OrionLib:MakeNotification({
            Name = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß",
            Content = "‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",
            Image = "rbxassetid://6031075936",
            Time = 3
        })
    end
end

-- ==========================
-- ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡πâ‡∏≤‡∏ô
-- ==========================
FarmTab:AddButton({
    Name = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡πâ‡∏≤‡∏ô",
    Callback = saveHomePosition
})

-- ==========================
-- Toggle Auto Attack
-- ==========================
FarmTab:AddToggle({
    Name = "‚öîÔ∏è ‡πÇ‡∏à‡∏°‡∏ï‡∏µ Brainrot ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(value)
        if not homeSaved and value then
            OrionLib:MakeNotification({
                Name = "‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",
                Content = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",
                Image = "rbxassetid://6031075936",
                Time = 3
            })
            autoAttackEnabled = false
            return
        end
        autoAttackEnabled = value
    end
})

-- ==========================
-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
-- ==========================
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local attackRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("AttacksServer"):WaitForChild("WeaponAttack")
local sellRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("ItemSell")

local floatHeight = 3
local lerpSpeed = 0.5
local startFarming = false
local hasWarpedToHome = false
local sellingEnabled = false
local cooldownTime = 20
local lastSellTime = 0

-- ==========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤ Brainrots
-- ==========================
local function getBrainrots()
    local folder = workspace:FindFirstChild("ScriptedMap") and workspace.ScriptedMap:FindFirstChild("Brainrots")
    if not folder then return {} end
    local brainrots = {}
    for _, v in ipairs(folder:GetChildren()) do
        if v:IsA("Model") then
            table.insert(brainrots, v)
        end
    end
    return brainrots
end

-- ==========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Equip Bat
-- ==========================
local function equipLeatherGripBat()
    local backpack = player:FindFirstChild("Backpack")
    if backpack then
        local bat = backpack:FindFirstChild("Leather Grip Bat")
        if bat and player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid:EquipTool(bat)
        end
    end
end

-- ==========================
-- Toggle Auto Sell Brainrot
-- ==========================
FarmTab:AddToggle({
    Name = "üí∞ ‡∏Ç‡∏≤‡∏¢ Brainrot ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(value)
        sellingEnabled = value
        OrionLib:MakeNotification({
            Name = "Auto Sell Brainrot",
            Content = value and "‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß" or "‚ùå ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß",
            Image = "rbxassetid://6031075936",
            Time = 3
        })
    end
})

-- ==========================
-- Loop Auto Attack + Auto Sell
-- ==========================
task.spawn(function()
    while true do
        task.wait(0.03)
        -- Auto Attack
        if autoAttackEnabled and player.Character then
            local hrp = player.Character:FindFirstChild("HumanoidRootPart")
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if hrp and humanoid then
                humanoid.PlatformStand, humanoid.Sit = false, false
                hrp.Velocity = Vector3.zero

                if not hasWarpedToHome and homeSaved and homePosition then
                    hrp.CFrame = CFrame.new(homePosition)
                    hasWarpedToHome = true
                    wait(0.5)
                    startFarming = true
                end

                if startFarming then
                    local brainrots = getBrainrots()
                    local closest, minDist = nil, math.huge
                    for _, enemy in ipairs(brainrots) do
                        if enemy and enemy.Parent then
                            local part = enemy:FindFirstChild("HumanoidRootPart") or enemy:FindFirstChildWhichIsA("BasePart")
                            if part then
                                local dist = (part.Position - hrp.Position).Magnitude
                                if dist < minDist then
                                    closest = enemy
                                    minDist = dist
                                end
                            end
                        end
                    end

                    if closest and closest.Parent then
                        local targetPart = closest:FindFirstChild("HumanoidRootPart") or closest:FindFirstChildWhichIsA("BasePart")
                        if targetPart then
                            local newPos = hrp.Position:Lerp(Vector3.new(targetPart.Position.X, targetPart.Position.Y - floatHeight, targetPart.Position.Z), lerpSpeed)
                            hrp.CFrame = CFrame.new(newPos, Vector3.new(targetPart.Position.X, newPos.Y, targetPart.Position.Z))

                            -- ‡πÉ‡∏™‡πà‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏µ
                            local tool = player.Character:FindFirstChildOfClass("Tool")
                            if not tool or tool.Name ~= "Leather Grip Bat" then
                                equipLeatherGripBat()
                            end

                            -- ‡∏ï‡∏µ Brainrot
                            local idObj = closest:FindFirstChild("ID")
                            local idValue = idObj and idObj.Value or closest.Name
                            pcall(function() attackRemote:FireServer({{idValue}}) end)
                        end
                    end
                end
            end
        end

        -- Auto Sell Brainrot
        if sellingEnabled and tick() - lastSellTime >= cooldownTime then
            pcall(function() sellRemote:FireServer() end)
            lastSellTime = tick()
        end
    end
end)


-- ==========================
-- ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Gear ‡πÅ‡∏•‡∏∞ Seed
-- ==========================
local gearsItems = {"Water Bucket","Frost Grenade","Banana Gun","Frost Blower","Carrot Launcher"}
local seedsItems = {"Cactus Seed","Strawberry Seed","Pumpkin Seed","Sunflower Seed","Dragon Fruit Seed","Eggplant Seed","Watermelon Seed","Grape Seed","Cocotank Seed","Carnivorous Plant Seed","Mr Carrot Seed","Tomatrio Seed","Shroombino Seed"}

local autoBuyGears = {}
local autoBuySeeds = {}
for _, gearName in ipairs(gearsItems) do
    autoBuyGears[gearName] = false
end
for _, seedName in ipairs(seedsItems) do
    autoBuySeeds[seedName] = false
end

local buyAllGearsEnabled = false
local buyAllSeedsEnabled = false

-- ==========================
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Tab ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
-- ==========================
local ShopTab = Window:MakeTab({
    Name = "üõí ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤",
    Icon = "rbxassetid://6031075936"
})

-- Toggle ‡∏ã‡∏∑‡πâ‡∏≠ Gear ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
ShopTab:AddToggle({
    Name = "‡∏ã‡∏∑‡πâ‡∏≠ Gear ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(state)
        buyAllGearsEnabled = state
    end
})

-- Toggle ‡∏ã‡∏∑‡πâ‡∏≠ Seed ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
ShopTab:AddToggle({
    Name = "‡∏ã‡∏∑‡πâ‡∏≠ Seed ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
    Default = false,
    Callback = function(state)
        buyAllSeedsEnabled = state
    end
})

-- Toggle Gear ‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß
for i = 1, #gearsItems do
    local gearName = gearsItems[i]
    ShopTab:AddToggle({
        Name = gearName,
        Default = false,
        Callback = function(state)
            autoBuyGears[gearName] = state
        end
    })
end

-- Toggle Seed ‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß
for i = 1, #seedsItems do
    local seedName = seedsItems[i]
    ShopTab:AddToggle({
        Name = seedName,
        Default = false,
        Callback = function(state)
            autoBuySeeds[seedName] = state
        end
    })
end

-- ==========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ã‡∏∑‡πâ‡∏≠ Gear / Seed
-- ==========================
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local buyGearRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("BuyGear")
local buySeedRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("BuyItem")

local function buyGear(gearName)
    pcall(function() buyGearRemote:FireServer(gearName) end)
end

local function buySeed(seedName)
    pcall(function() buySeedRemote:FireServer(seedName) end)
end

-- ==========================
-- Loop Auto Buy Gear & Seed
-- ==========================
task.spawn(function()
    while true do
        task.wait(0.1)

        -- ‡∏ã‡∏∑‡πâ‡∏≠ Gear
        if buyAllGearsEnabled then
            for _, gearName in ipairs(gearsItems) do
                buyGear(gearName)
                task.wait(0.15) -- ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏°‡∏£‡∏±‡∏ö Remote
            end
        else
            for gearName, state in pairs(autoBuyGears) do
                if state then
                    buyGear(gearName)
                    task.wait(0.15)
                end
            end
        end

        -- ‡∏ã‡∏∑‡πâ‡∏≠ Seed
        if buyAllSeedsEnabled then
            for _, seedName in ipairs(seedsItems) do
                buySeed(seedName)
                task.wait(0.15)
            end
        else
            for seedName, state in pairs(autoBuySeeds) do
                if state then
                    buySeed(seedName)
                    task.wait(0.15)
                end
            end
        end
    end
end)




local MiscTab = Window:MakeTab({
    Name = "‚öôÔ∏è ‡∏≠‡∏∑‡πà‡∏ô‡πÜ",
    Icon = "rbxassetid://6031075936"
})

-- ==========================
-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Init ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î UI
-- ==========================
OrionLib:Init()

-- Load UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Chxtoqfee12/Plant-brainrot/refs/heads/main/lib"))()

-- Create Main Window
local Window = Library:Window({
    Title = "CHX Plant vs Brainrot",
    Desc = "discord.gg/zHMEUZrHZ6",
    Icon = 105059922903197,
    Theme = "Dark",
    Config = {Keybind = Enum.KeyCode.LeftControl, Size = UDim2.new(0,400,0,250)},
    CloseUIButton = {Enabled = true, Text = "Close/Open"}
})

-- Notification
Window:Notify({
    Title = "Notification",
    Desc = "สคริปแมพ 'Plant vs Brainrot' V1 แจ้งบัคที่ Discord",
    Time = 4
})


-- Tab
local Tab = Window:Tab({Title = "Auto Farm", Icon = "star"})

-- ====== Sell All Brainrot ======
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local sellRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("ItemSell")

local sellingEnabled = false
local cooldownTime = 20
local currentCooldown = 0


-- Toggle to enable/disable auto selling
Tab:Toggle({
    Title = "Auto Sell Brainrot",
    Desc = "If enabled, it will instantly sell, then sell again every 20 seconds",
    Default = false,
    Callback = function(state)
        sellingEnabled = state
        if state then
            -- Sell instantly when turning ON
            pcall(function()
                sellRemote:FireServer()
            end)
            currentCooldown = cooldownTime
        else
            cooldownLabel:Set("Sell Cooldown: OFF")
        end
    end
})

-- Loop for auto sell + update cooldown label
task.spawn(function()
    while true do
        task.wait(1)
        if sellingEnabled then
            if currentCooldown <= 0 then
                -- Fire Remote to sell
                pcall(function()
                    sellRemote:FireServer()
                end)
                currentCooldown = cooldownTime
            else
                currentCooldown -= 1
            end
            cooldownLabel:Set("Sell Cooldown: " .. tostring(currentCooldown) .. "s")
        end
    end
end)





-- Tab
local Tab = Window:Tab({Title = "Auto buy", Icon = "star"})

-- Remote Event
local buyEvent = game:GetService("ReplicatedStorage"):WaitForChild("BridgeNet2"):WaitForChild("dataRemoteEvent")

-- ================= Gears Shop =================
Tab:Section({Title = "Gears Shop"})

local gearsItems = {
    "Meme Lucky Egg",
    "Secret Lucky Egg",
    "Godly Lucky Egg",
    "Speed Potion",
    "Damage Potion",
    "Lucky Potion",
    "Banana Gun",
    "Frost Grenade",
    "Carrot Launcher",
    "Water Bucket",
    "Frost Blower",
}

local autoBuyGears = {}

-- Toggle ของแต่ละ Gears
for _, gearName in ipairs(gearsItems) do
    autoBuyGears[gearName] = false
    Tab:Toggle({
        Title = gearName,
        Desc = "Auto buy "..gearName,
        Value = false,
        Callback = function(v)
            autoBuyGears[gearName] = v
        end
    })
end

-- Toggle Buy All Gears
local buyAllGearsEnabled = false
Tab:Toggle({
    Title = "Auto Buy All Gears",
    Desc = "Automatically buy all gears continuously",
    Value = false,
    Callback = function(v)
        buyAllGearsEnabled = v
    end
})

-- ================= Seeds Shop =================
Tab:Section({Title = "Seeds Shop"})

local seedItems = {
    "Dragon Fruit Seed",
    "Watermelon Seed",
    "Mr Carrot Seed",
    "Cocotank Seed",
    "Tomatrio Seed",
    "Carnivorous Plant Seed",
    "Strawberry Seed",
    "Sunflower Seed",
    "Pumpkin Seed",
    "Eggplant Seed",
    "Cactus Seed",
}

local autoBuySeeds = {}

-- Toggle ของแต่ละ Seed
for _, seedName in ipairs(seedItems) do
    autoBuySeeds[seedName] = false
    Tab:Toggle({
        Title = seedName,
        Desc = "Auto buy "..seedName,
        Value = false,
        Callback = function(v)
            autoBuySeeds[seedName] = v
        end
    })
end

-- Toggle Buy All Seeds
local buyAllSeedsEnabled = false
Tab:Toggle({
    Title = "Auto Buy All Seeds",
    Desc = "Automatically buy all seeds continuously",
    Value = false,
    Callback = function(v)
        buyAllSeedsEnabled = v
    end
})

-- ================= Loop Auto Buy =================
task.spawn(function()
    while true do
        task.wait(0.1)

        -- Auto Buy Gears
        if buyAllGearsEnabled then
            for _, gearName in ipairs(gearsItems) do
                pcall(function()
                    buyEvent:FireServer({gearName," "})
                end)
                task.wait(0.5)
            end
        else
            for gearName, isEnabled in pairs(autoBuyGears) do
                if isEnabled then
                    pcall(function()
                        buyEvent:FireServer({gearName," "})
                    end)
                    task.wait(0.5)
                end
            end
        end

        -- Auto Buy Seeds
        if buyAllSeedsEnabled then
            for _, seedName in ipairs(seedItems) do
                pcall(function()
                    buyEvent:FireServer({seedName,"\a"})
                end)
                task.wait(0.5)
            end
        else
            for seedName, isEnabled in pairs(autoBuySeeds) do
                if isEnabled then
                    pcall(function()
                        buyEvent:FireServer({seedName,"\a"})
                    end)
                    task.wait(0.5)
                end
            end
        end
    end
end)

-- Load UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Chxtoqfee12/Plant-brainrot/refs/heads/main/lib"))()

-- Create Main Window
local Window = Library:Window({
    Title = "CHX Plant vs Brainrot",
    Desc = "discord.gg/zHMEUZrHZ6",
    Icon = 105059922903197,
    Theme = "Dark",
    Config = {Keybind = Enum.KeyCode.LeftControl, Size = UDim2.new(0,450,0,350)},
    CloseUIButton = {Enabled = true, Text = "Close/Open"}
})

-- Notification
Window:Notify({
    Title = "Notification",
    Desc = "สคริปแมพ 'Plant vs Brainrot' V1 แจ้งบัคที่ Discord",
    Time = 4
})

-- ===== Main Tab =====
local MainTab = Window:Tab({Title = "Main", Icon = "star"})
MainTab:Section({Title = "Player Boosts"})

-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer


-- Speed Boost Slider
MainTab:Slider({
    Title = "Speed Boost",
    Desc = "Adjust WalkSpeed",
    Min = 16,  -- ค่าเริ่มต้นปกติ
    Max = 200, -- ค่าสูงสุด
    Default = 16,
    Callback = function(value)
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = value
        end
    end
})

-- Jump Power Slider
MainTab:Slider({
    Title = "Jump Power",
    Desc = "Adjust Jump Power",
    Min = 50,   -- ปกติประมาณ 50
    Max = 500,  -- สูงสุด
    Default = 50,
    Callback = function(value)
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = value
        end
    end
})


-- Boost FPS Clay Mode
MainTab:Button({
    Title = "Boost FPS (Clay Mode)",
    Desc = "Remove textures & smooth everything like clay",
    Callback = function()
        -- ตั้งค่า Quality ต่ำสุด
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
        pcall(function() game.Lighting.GlobalShadows = false end)
        pcall(function() game.Lighting.FogEnd = 9e9 end)

        -- ปิด Effect ทั้งหมด
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Fire") or v:IsA("Smoke") then
                v.Enabled = false
            elseif v:IsA("Explosion") then
                v.Visible = false
            end
        end

        -- ลบ Texture/Decal ทั้งหมด (Block / ตัวละคร)
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("Decal") or v:IsA("Texture") then
                v:Destroy()
            elseif v:IsA("SpecialMesh") then
                -- ลบ Mesh ให้เป็น block ธรรมดา
                v:Destroy()
            end
        end

        -- เปลี่ยนวัสดุทั้งหมดให้เป็น SmoothPlastic (คล้ายดินน้ำมัน)
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") then
                v.Material = Enum.Material.SmoothPlastic
            end
        end

        -- บังคับ FPS Cap (ถ้า executor รองรับ)
        if setfpscap then
            setfpscap(240)
        end

        print("✅ Clay Mode Applied (ทุกอย่างกลายเป็นดินน้ำมัน)")
    end
})





-- Tab
local Tab = Window:Tab({Title = "Auto Farm", Icon = "star"})

-- ====== Sell All Brainrot ======
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local sellRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("ItemSell")

local sellingEnabled = false
local cooldownTime = 20
local currentCooldown = 0


-- Toggle to enable/disable auto selling
Tab:Toggle({
    Title = "Auto Sell Brainrot",
    Desc = "If enabled, it will instantly sell, then sell again every 20 seconds",
    Default = false,
    Callback = function(state)
        sellingEnabled = state
        if state then
            -- Sell instantly when turning ON
            pcall(function()
                sellRemote:FireServer()
            end)
            currentCooldown = cooldownTime
        else
            cooldownLabel:Set("Sell Cooldown: OFF")
        end
    end
})

-- Loop for auto sell + update cooldown label
task.spawn(function()
    while true do
        task.wait(1)
        if sellingEnabled then
            if currentCooldown <= 0 then
                -- Fire Remote to sell
                pcall(function()
                    sellRemote:FireServer()
                end)
                currentCooldown = cooldownTime
            else
                currentCooldown -= 1
            end
            cooldownLabel:Set("Sell Cooldown: " .. tostring(currentCooldown) .. "s")
        end
    end
end)





-- Tab
local Tab = Window:Tab({Title = "Auto buy", Icon = "star"})

-- Remote Event
local buyEvent = game:GetService("ReplicatedStorage"):WaitForChild("BridgeNet2"):WaitForChild("dataRemoteEvent")

-- ================= Gears Shop =================
Tab:Section({Title = "Gears Shop"})

-- Toggle Buy All Gears
local buyAllGearsEnabled = false
Tab:Toggle({
    Title = "Auto Buy All Gears",
    Desc = "Automatically buy all gears",
    Value = false,
    Callback = function(v)
        buyAllGearsEnabled = v
    end
})

local gearsItems = {
    "Meme Lucky Egg",
    "Secret Lucky Egg",
    "Godly Lucky Egg",
    "Speed Potion",
    "Damage Potion",
    "Lucky Potion",
    "Banana Gun",
    "Frost Grenade",
    "Carrot Launcher",
    "Water Bucket",
    "Frost Blower",
}

local autoBuyGears = {}

-- Toggle ของแต่ละ Gears
for _, gearName in ipairs(gearsItems) do
    autoBuyGears[gearName] = false
    Tab:Toggle({
        Title = gearName,
        Desc = "Auto buy "..gearName,
        Value = false,
        Callback = function(v)
            autoBuyGears[gearName] = v
        end
    })
end




-- ================= Seeds Shop =================
Tab:Section({Title = "Seeds Shop"})

-- Toggle Buy All Seeds
local buyAllSeedsEnabled = false
Tab:Toggle({
    Title = "Auto Buy All Seeds",
    Desc = "Automatically buy all seeds",
    Value = false,
    Callback = function(v)
        buyAllSeedsEnabled = v
    end
})

local seedItems = {
    "Cactus Seed",
    "Strawberry Seed",
    "Pumpkin Seed",
    "Sunflower Seed",
    "Dragon Fruit Seed",
    "Eggplant Seed",
    "Watermelon Seed",
    "Cocotank Seed",
    "Carnivorous Plant Seed",
    "Mr Carrot Seed",
    "Tomatrio Seed",
}

local autoBuySeeds = {}

-- Toggle ของแต่ละ Seed
for _, seedName in ipairs(seedItems) do
    autoBuySeeds[seedName] = false
    Tab:Toggle({
        Title = seedName,
        Desc = "Auto buy "..seedName,
        Value = false,
        Callback = function(v)
            autoBuySeeds[seedName] = v
        end
    })
end


-- ================= Loop Auto Buy =================
task.spawn(function()
    while true do
        task.wait(0.05) -- กำหนดดีเลย์นิดหน่อยเพื่อกันค้าง

        if buyAllGearsEnabled then
            for _, gearName in ipairs(gearsItems) do
                pcall(function()
                    buyEvent:FireServer({gearName," "})
                end)
                task.wait(0.05)
            end
        else
            for gearName, isEnabled in pairs(autoBuyGears) do
                if isEnabled then
                    pcall(function()
                        buyEvent:FireServer({gearName," "})
                    end)
                    task.wait(0.05)
                end
            end
        end

        if buyAllSeedsEnabled then
            for _, seedName in ipairs(seedItems) do
                pcall(function()
                    buyEvent:FireServer({seedName,"\a"})
                end)
                task.wait(0.05)
            end
        else
            for seedName, isEnabled in pairs(autoBuySeeds) do
                if isEnabled then
                    pcall(function()
                        buyEvent:FireServer({seedName,"\a"})
                    end)
                    task.wait(0.05)
                end
            end
        end
    end
end)



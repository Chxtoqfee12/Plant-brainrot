local PLACE_ID = 127742093697776
if game.PlaceId ~= PLACE_ID then return end

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LanguageSelector"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 180, 0, 200)
frame.Position = UDim2.new(0.5, -90, 0.5, -110)
frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
frame.BorderSizePixel = 0
frame.ClipsDescendants = true
frame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = frame

local border = Instance.new("UIStroke")
border.Parent = frame
border.Thickness = 3
border.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local colors = {
    Color3.fromRGB(255,0,0),
    Color3.fromRGB(255,127,0),
    Color3.fromRGB(255,255,0),
    Color3.fromRGB(0,255,0),
    Color3.fromRGB(0,0,255),
    Color3.fromRGB(75,0,130),
    Color3.fromRGB(139,0,255),
}

spawn(function()
    local index = 1
    local nextIndex = 2
    local tweenSpeed = 0.5
    while frame.Parent do
        local tweenInfo = TweenInfo.new(tweenSpeed, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(border, tweenInfo, {Color = colors[nextIndex]})
        tween:Play()
        tween.Completed:Wait()
        index = index + 1
        nextIndex = index + 1
        if index > #colors then index = 1 end
        if nextIndex > #colors then nextIndex = 1 end
    end
end)

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,25,0,25)
closeBtn.Position = UDim2.new(1,-30,0,5)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
closeBtn.Parent = frame
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0,6)

closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -20, 0, 40)
title.Position = UDim2.new(0, 10, 0, 20)
title.BackgroundTransparency = 1
title.Text = "เลือกภาษา / Choose Language"
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextXAlignment = Enum.TextXAlignment.Center
title.Parent = frame

local function createLangButton(text, yPos, url)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8,0,0,40)
    btn.Position = UDim2.new(0.1,0,yPos,0)
    btn.BackgroundTransparency = 1 -- ไม่มีพื้น
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 20
    btn.Parent = frame
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0,8)
    local stroke = Instance.new("UIStroke")
    stroke.Parent = btn
    stroke.Thickness = 2
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    spawn(function()
        local idx = 1
        local nextIdx = 2
        local speed = 0.5
        while btn.Parent do
            local tween = TweenService:Create(stroke, TweenInfo.new(speed, Enum.EasingStyle.Linear), {Color = colors[nextIdx]})
            tween:Play()
            tween.Completed:Wait()
            idx = idx + 1
            nextIdx = idx + 1
            if idx > #colors then idx = 1 end
            if nextIdx > #colors then nextIdx = 1 end
        end
    end)

    btn.MouseButton1Click:Connect(function()
        loadstring(game:HttpGet(url))()
        screenGui:Destroy()
    end)
end

createLangButton("ภาษาไทย", 0.35, "https://raw.githubusercontent.com/Chxtoqfee12/Plant-brainrot/refs/heads/main/Plant%20Brainrot%20Thai")
createLangButton("English", 0.6, "https://raw.githubusercontent.com/Chxtoqfee12/Plant-brainrot/refs/heads/main/plant%20brainrot%20Eng")

local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)
